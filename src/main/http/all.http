# --- [ì„¤ì •] ---
# TaskApi ì„œë²„ ì£¼ì†Œ
@baseUrl = http://10.201.235.221:8082

# --- ì‚¬ìš©ì ID ë³€ìˆ˜ ---
@adminId_P1 = 1
@memberId_P1_A = 101
@memberId_P1_B = 102

@adminId_P2 = 2
@memberId_P2_A = 201

# --- ìƒì„±ë  ë¦¬ì†ŒìŠ¤ ID ë³€ìˆ˜ ---
# ì‹¤í–‰ í›„, ìƒì„±ëœ ì‹¤ì œ IDë¡œ ì´ ê°’ë“¤ì„ ìˆ˜ì •í•˜ê³  [TEST]ì™€ [CLEANUP]ì„ ì‹¤í–‰í•˜ì„¸ìš”.
@projectId_1 = 1
@projectId_2 = 2

@milestoneId_P1_1 = 1
@milestoneId_P1_2 = 2

@tagId_P1_1 = 1
@tagId_P1_2 = 2
@tagId_P2_1 = 3

@taskId_P1_1 = 1
@taskId_P1_2 = 2

@commentId_P1_1 = 1
@commentId_P1_2 = 2


### ======================================================
### [SETUP] 1. í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± (ìˆœì„œëŒ€ë¡œ ì‹¤í–‰)
### ======================================================

### [C] 1-1. í”„ë¡œì íŠ¸ 1 ìƒì„± (Admin: 1)
POST {{baseUrl}}/projects
Content-Type: application/json
X-USER-ID: {{adminId_P1}}

{
  "name": "NHN-TASK-API-PROJECT (P1)"
}

### [C] 1-2. í”„ë¡œì íŠ¸ 2 ìƒì„± (Admin: 2)
POST {{baseUrl}}/projects
Content-Type: application/json
X-USER-ID: {{adminId_P2}}

{
  "name": "SIDE-PROJECT (P2)"
}

### [C] 1-3. í”„ë¡œì íŠ¸ 1ì— ë©¤ë²„ ì¶”ê°€ (Admin: 1)
POST {{baseUrl}}/projects/{{projectId_1}}/members
Content-Type: application/json
X-USER-ID: {{adminId_P1}}

[
  { "accountId": {{memberId_P1_A}} },
  { "accountId": {{memberId_P1_B}} }
]

### [C] 1-4. í”„ë¡œì íŠ¸ 2ì— ë©¤ë²„ ì¶”ê°€ (Admin: 2)
POST {{baseUrl}}/projects/{{projectId_2}}/members
Content-Type: application/json
X-USER-ID: {{adminId_P2}}

[
  { "accountId": {{memberId_P2_A}} }
]

### [C] 1-5. í”„ë¡œì íŠ¸ 1ì— ë§ˆì¼ìŠ¤í†¤ 2ê°œ ìƒì„± (Admin: 1)
POST {{baseUrl}}/projects/{{projectId_1}}/milestones
Content-Type: application/json
X-USER-ID: {{adminId_P1}}

{ "name": "P1-M1-Sprint" }

###
POST {{baseUrl}}/projects/{{projectId_1}}/milestones
Content-Type: application/json
X-USER-ID: {{adminId_P1}}

{ "name": "P1-M2-Release" }

### [C] 1-6. ê° í”„ë¡œì íŠ¸ì— íƒœê·¸ ìƒì„±
# P1 íƒœê·¸ 2ê°œ (Admin: 1)
POST {{baseUrl}}/projects/{{projectId_1}}/tags
Content-Type: application/json
X-USER-ID: {{adminId_P1}}

{ "name": "P1-Backend" }

###
POST {{baseUrl}}/projects/{{projectId_1}}/tags
Content-Type: application/json
X-USER-ID: {{adminId_P1}}

{ "name": "P1-Urgent" }

### P2 íƒœê·¸ 1ê°œ (Admin: 2)
POST {{baseUrl}}/projects/{{projectId_2}}/tags
Content-Type: application/json
X-USER-ID: {{adminId_P2}}

{ "name": "P2-Frontend" }

### [C] 1-7. í”„ë¡œì íŠ¸ 1ì— íƒœìŠ¤í¬ 2ê°œ ìƒì„±
# íƒœìŠ¤í¬ 1 (ì‘ì„±ì: ë©¤ë²„ A)
POST {{baseUrl}}/projects/{{projectId_1}}/tasks
Content-Type: application/json
X-USER-ID: {{memberId_P1_A}}

{
  "title": "P1-T1: ë¡œê·¸ì¸ API ê°œë°œ",
  "content": "JWT ê¸°ë°˜ ì¸ì¦ ë¡œì§ êµ¬í˜„"
}

### íƒœìŠ¤í¬ 2 (ì‘ì„±ì: ë©¤ë²„ B)
POST {{baseUrl}}/projects/{{projectId_1}}/tasks
Content-Type: application/json
X-USER-ID: {{memberId_P1_B}}

{
  "title": "P1-T2: UI ë²„ê·¸ ìˆ˜ì •",
  "content": "ë¡œê·¸ì¸ ë²„íŠ¼ CSS ê¹¨ì§ í˜„ìƒ"
}

### [C] 1-8. íƒœìŠ¤í¬ 1ì— ëŒ“ê¸€ 2ê°œ ìƒì„±
# ëŒ“ê¸€ 1 (ì‘ì„±ì: ë©¤ë²„ B)
POST {{baseUrl}}/tasks/{{taskId_P1_1}}/comments
Content-Type: application/json
X-USER-ID: {{memberId_P1_B}}

{ "content": "API ëª…ì„¸ì„œ ê³µìœ  ë¶€íƒë“œë¦½ë‹ˆë‹¤." }

### ëŒ“ê¸€ 2 (ì‘ì„±ì: ê´€ë¦¬ì)
POST {{baseUrl}}/tasks/{{taskId_P1_1}}/comments
Content-Type: application/json
X-USER-ID: {{adminId_P1}}

{ "content": "í™•ì¸í–ˆìŠµë‹ˆë‹¤. Wikiì— ì—…ë¡œë“œí•˜ê² ìŠµë‹ˆë‹¤." }

### [C] 1-9. íƒœìŠ¤í¬ì— íƒœê·¸ í• ë‹¹
# íƒœìŠ¤í¬ 1ì— íƒœê·¸ 2ê°œ í• ë‹¹ (ë©¤ë²„ A)
POST {{baseUrl}}/tasks/{{taskId_P1_1}}/tags
X-USER-ID: {{memberId_P1_A}}
Content-Type: application/json

{ "tagId": {{tagId_P1_1}} }

###
POST {{baseUrl}}/tasks/{{taskId_P1_1}}/tags
X-USER-ID: {{memberId_P1_A}}
Content-Type: application/json

{ "tagId": {{tagId_P1_2}} }


### ======================================================
### [TEST] 2. ì¡°íšŒ, ìˆ˜ì •, ê¶Œí•œ í…ŒìŠ¤íŠ¸
### ======================================================

### [R] í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ (ë©¤ë²„ AëŠ” P1ë§Œ ë³´ì—¬ì•¼ í•¨)
GET {{baseUrl}}/projects
X-USER-ID: {{memberId_P1_A}}

### [R] í”„ë¡œì íŠ¸ ìƒì„¸ ì¡°íšŒ (P1 ë©¤ë²„ê°€ P1 ì¡°íšŒ -> ì„±ê³µ)
GET {{baseUrl}}/projects/{{projectId_1}}
X-USER-ID: {{memberId_P1_A}}

### [R] ğŸ”´ ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸: ë‹¤ë¥¸ í”„ë¡œì íŠ¸ ì¡°íšŒ (P2 ë©¤ë²„ê°€ P1 ì¡°íšŒ -> ì‹¤íŒ¨í•´ì•¼ í•¨)
# ì˜ˆìƒ ê²°ê³¼: 403 Forbidden (MemberAccessDeniedException)
GET {{baseUrl}}/projects/{{projectId_1}}
X-USER-ID: {{memberId_P2_A}}

### [U] íƒœìŠ¤í¬ ìˆ˜ì • ë° ë§ˆì¼ìŠ¤í†¤ í• ë‹¹ (ì‘ì„±ì ë³¸ì¸ -> ì„±ê³µ)
PUT {{baseUrl}}/tasks/{{taskId_P1_1}}
X-USER-ID: {{memberId_P1_A}}
Content-Type: application/json

{
  "title": "[ìˆ˜ì •] P1-T1: ë¡œê·¸ì¸ API ê°œë°œ",
  "content": "OAuth2 ì¶”ê°€ êµ¬í˜„ í•„ìš”",
  "milestoneId": {{milestoneId_P1_1}}
}

### 1ë²ˆ íƒœìŠ¤í¬ì˜ ì œëª©ê³¼ ë‚´ìš©ì„ ìˆ˜ì •
PUT http://10.201.235.221:8082/tasks/1
X-USER-ID: 101
Content-Type: application/json

{
  "title": "ìˆ˜ì •ëœ íƒœìŠ¤í¬ ì œëª©",
  "content": "ìˆ˜ì •ëœ íƒœìŠ¤í¬ ë‚´ìš©",
  "mileStoneId": 1
}


### [U] ğŸ”´ ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸: ê´€ë¦¬ìê°€ ì•„ë‹Œ ë©¤ë²„ê°€ í”„ë¡œì íŠ¸ ìƒíƒœ ë³€ê²½ ì‹œë„
# ì˜ˆìƒ ê²°ê³¼: 403 Forbidden
PATCH {{baseUrl}}/projects/{{projectId_1}}/status
Content-Type: application/json
X-USER-ID: {{memberId_P1_A}}

{ "status": "CLOSED" }

### [U] ğŸ”´ ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸: ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì˜ íƒœê·¸ë¥¼ í• ë‹¹í•˜ë ¤ëŠ” ì‹œë„
# P1ì˜ íƒœìŠ¤í¬ì— P2ì˜ íƒœê·¸ë¥¼ í• ë‹¹ (tagId_P2_1)
# ì˜ˆìƒ ê²°ê³¼: 403 Forbidden ë˜ëŠ” 404 Not Found (êµ¬í˜„ì— ë”°ë¼ ë‹¤ë¦„)
POST {{baseUrl}}/tasks/{{taskId_P1_1}}/tags
X-USER-ID: {{memberId_P1_A}}
Content-Type: application/json

{ "tagId": {{tagId_P2_1}} }


### ======================================================
### [CLEANUP] 3. ìƒì„±ëœ ë°ì´í„° ì‚­ì œ (ì˜ì¡´ì„± ì—­ìˆœ)
### ======================================================

# -- ì£¼ì„ ì²˜ë¦¬ëœ ì‚­ì œ ìš”ì²­ë“¤ --
# í•„ìš”í•œ ê²½ìš° ì£¼ì„ì„ í•´ì œí•˜ê³  IDë¥¼ ë§ì¶°ì„œ ì‹¤í–‰í•˜ì„¸ìš”.

# ### [D] íƒœìŠ¤í¬ 1ì—ì„œ íƒœê·¸ 1 í•´ì œ
# DELETE {{baseUrl}}/tasks/{{taskId_P1_1}}/tags/{{tagId_P1_1}}
# X-USER-ID: {{adminId_P1}}

# ### [D] ëŒ“ê¸€ 1 ì‚­ì œ
# DELETE {{baseUrl}}/comments/{{commentId_P1_1}}
# X-USER-ID: {{adminId_P1}}

# ### [D] íƒœìŠ¤í¬ 2 ì‚­ì œ
# DELETE {{baseUrl}}/tasks/{{taskId_P1_2}}
# X-USER-ID: {{adminId_P1}}

# ### [D] í”„ë¡œì íŠ¸ 1 ì „ì²´ ì‚­ì œ (ì—°ê´€ëœ ëª¨ë“  ë°ì´í„°ê°€ Cascadeë¡œ ì‚­ì œë¨)
# DELETE {{baseUrl}}/projects/{{projectId_1}}
# X-USER-ID: {{adminId_P1}}

# ### [D] í”„ë¡œì íŠ¸ 2 ì „ì²´ ì‚­ì œ
# DELETE {{baseUrl}}/projects/{{projectId_2}}
# X-USER-ID: {{adminId_P2}}